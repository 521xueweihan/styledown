#!/usr/bin/env node
var Styledown = require('..');
var read = require('read-input');

var args = require('minimist')(process.argv.slice(2), {
  alias: { h: 'help', v: 'version' }
});

if (args.help) {
  console.log([
      'Usage:',
      '    styledown FILE',
      '    styledown --css > styledown.css',
      '    ... | styledown',
      '',
      'Options:',
      '    -h, --help         print usage information',
      '    -v, --version      show version info and exit',
      '        --css          prints the css',
  ].join('\n'));
  process.exit();
}

if (args.version) {
  console.log(require('../package.json').version);
  process.exit();
}

if (args.css) {
  process.stdout.write(require('fs').readFileSync(__dirname + '/../data/styledown.css'));
  process.exit();
}

read(args._, function (err, res) {
  var html = Styledown.parse(res.data);
  process.stdout.write(html + "\n");
});
